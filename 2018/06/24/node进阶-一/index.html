<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.4.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.4.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.4.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.4.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.4.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.4.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="作为当前前端必须掌握的内容之一，node已经成为了前端的标配，已经再也不是以前页面仔，而是向着工程师靠拢。这就要求我们除了熟悉浏览器端的要求之外，还需要更多熟悉服务端的一些内容，那么我们一起来在node方面来进阶吧。 首先来看一个内容 开发环境和调试工具 1、环境CommonJs1234567891011121314151617这是一个JS模块管理规范JS中的模块规范（CommonJS，AMD，C">
<meta property="og:type" content="article">
<meta property="og:title" content="node进阶(一)">
<meta property="og:url" content="http://yoursite.com/2018/06/24/node进阶-一/index.html">
<meta property="og:site_name" content="七夜博客">
<meta property="og:description" content="作为当前前端必须掌握的内容之一，node已经成为了前端的标配，已经再也不是以前页面仔，而是向着工程师靠拢。这就要求我们除了熟悉浏览器端的要求之外，还需要更多熟悉服务端的一些内容，那么我们一起来在node方面来进阶吧。 首先来看一个内容 开发环境和调试工具 1、环境CommonJs1234567891011121314151617这是一个JS模块管理规范JS中的模块规范（CommonJS，AMD，C">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://yoursite.com/2018/06/24/node进阶-一/node_1.png">
<meta property="og:image" content="http://yoursite.com/2018/06/24/node进阶-一/node_2.png">
<meta property="og:updated_time" content="2018-06-24T08:34:56.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="node进阶(一)">
<meta name="twitter:description" content="作为当前前端必须掌握的内容之一，node已经成为了前端的标配，已经再也不是以前页面仔，而是向着工程师靠拢。这就要求我们除了熟悉浏览器端的要求之外，还需要更多熟悉服务端的一些内容，那么我们一起来在node方面来进阶吧。 首先来看一个内容 开发环境和调试工具 1、环境CommonJs1234567891011121314151617这是一个JS模块管理规范JS中的模块规范（CommonJS，AMD，C">
<meta name="twitter:image" content="http://yoursite.com/2018/06/24/node进阶-一/node_1.png">






  <link rel="canonical" href="http://yoursite.com/2018/06/24/node进阶-一/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>node进阶(一) | 七夜博客</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">七夜博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">思考驱动力</p>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Home</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />Archives</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/24/node进阶-一/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="七 夜">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="七夜博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">node进阶(一)
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-06-24 01:36:40 / Modified: 16:34:56" itemprop="dateCreated datePublished" datetime="2018-06-24T01:36:40+08:00">2018-06-24</time>
            

            
              

              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>作为当前前端必须掌握的内容之一，node已经成为了前端的标配，已经再也不是以前页面仔，而是向着工程师靠拢。这就要求我们除了熟悉浏览器端的要求之外，还需要更多熟悉服务端的一些内容，那么我们一起来在node方面来进阶吧。</p>
<p>首先来看一个内容</p>
<p>开发环境和调试工具</p>
<h3 id="1、环境"><a href="#1、环境" class="headerlink" title="1、环境"></a>1、环境</h3><h4 id="CommonJs"><a href="#CommonJs" class="headerlink" title="CommonJs"></a>CommonJs</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">这是一个JS模块管理规范</span><br><span class="line"></span><br><span class="line">JS中的模块规范（CommonJS，AMD，CMD）</span><br><span class="line"></span><br><span class="line">在浏览器环境下，没有模块也不是特别大的问题，毕竟网页程序的复杂性有限</span><br><span class="line"></span><br><span class="line">但是在服务器端，一定要有模块，与操作系统和其他应用程序互动，否则根本没法编程。</span><br><span class="line"></span><br><span class="line">NodeJS是CommonJS规范的实现，webpack 也是以CommonJS的形式来书写。</span><br><span class="line"></span><br><span class="line">CommonJS定义的模块分为:&#123;模块引用(require)&#125; &#123;模块定义(exports)&#125; &#123;模块标识(module)&#125;</span><br><span class="line"></span><br><span class="line">require()用来引入外部模块</span><br><span class="line"></span><br><span class="line">exports对象用于导出当前模块的方法或变量，唯一的导出口</span><br><span class="line"></span><br><span class="line">module对象就代表模块本身。</span><br></pre></td></tr></table></figure>
<h4 id="global"><a href="#global" class="headerlink" title="global"></a>global</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">服务器端端没有BOM、DOM，没有了window全局对象，成了global</span><br></pre></td></tr></table></figure>
<h4 id="process"><a href="#process" class="headerlink" title="process"></a>process</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">全局进程</span><br></pre></td></tr></table></figure>
<h3 id="2、调试工具"><a href="#2、调试工具" class="headerlink" title="2、调试工具"></a>2、调试工具</h3><p>新建一个js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">\\app.js</span><br><span class="line"></span><br><span class="line">console.log(&quot;this is test&quot;);</span><br></pre></td></tr></table></figure>
<p>开启终端，跑一下 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node app</span><br></pre></td></tr></table></figure>
<p>然后在输入 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node --inspect-brk app.js</span><br></pre></td></tr></table></figure>
<p>会出现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Debugger listening on ws://127.0.0.1:9229/1857a99c-6d02-4680-954d-29480f7bcc5e</span><br><span class="line">For help see https://nodejs.org/en/docs/inspector</span><br><span class="line">Debugger attached.</span><br></pre></td></tr></table></figure>
<p>打开谷歌浏览器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chrome://inspect</span><br></pre></td></tr></table></figure>
<p>出现如下内容</p>
<p><img src="/2018/06/24/node进阶-一/node_1.png" alt="bg"></p>
<p>点击 inspect</p>
<p><img src="/2018/06/24/node进阶-一/node_2.png" alt="bg"></p>
<p>这就是node私底下跑的内容，它将很多我们看不到的内容进行了编译，生成了块级作用域；</p>
<h3 id="3、require的特性"><a href="#3、require的特性" class="headerlink" title="3、require的特性"></a>3、require的特性</h3><p>先看一个demo    </p>
<p>创建一个文件夹用来储存模块内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//a.js</span><br><span class="line"></span><br><span class="line">console.log(&quot;this is a&quot;);</span><br><span class="line"></span><br><span class="line">let a = 1;</span><br><span class="line"></span><br><span class="line">module.exports.a = a;</span><br></pre></td></tr></table></figure>
<p>在外在建一个js文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// b.js</span><br><span class="line"></span><br><span class="line">let a = require(&apos;./a&apos;);</span><br><span class="line"></span><br><span class="line">console.log(a.a) //1</span><br></pre></td></tr></table></figure>
<p>到此我们来分析它的几个特性</p>
<h4 id="module-被加载的时候执行，加载后缓存"><a href="#module-被加载的时候执行，加载后缓存" class="headerlink" title="module 被加载的时候执行，加载后缓存"></a>module 被加载的时候执行，加载后缓存</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">只加载一次，之后用的存在缓存的值</span><br><span class="line"></span><br><span class="line">例如：</span><br><span class="line"></span><br><span class="line">require(&apos;./a&apos;);</span><br><span class="line"></span><br><span class="line">require(&apos;./a&apos;);</span><br><span class="line"></span><br><span class="line">这时候会输出一个this is a,而不是两个,</span><br></pre></td></tr></table></figure>
<h4 id="一旦出现某个模块被循环加载，就输出以执行的部分-还未执行的部分不会输出"><a href="#一旦出现某个模块被循环加载，就输出以执行的部分-还未执行的部分不会输出" class="headerlink" title="一旦出现某个模块被循环加载，就输出以执行的部分,还未执行的部分不会输出"></a>一旦出现某个模块被循环加载，就输出以执行的部分,还未执行的部分不会输出</h4><p>举个例子，在此处建立三个文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//06_run.js</span><br><span class="line"></span><br><span class="line">const A = require(&apos;./05_require/a&apos;);</span><br><span class="line"></span><br><span class="line">//此处因为上面已经引入过了B，所以不会再进行处理，所以此处直接从缓存中取值;</span><br><span class="line">const B = require(&apos;./05_require/b&apos;);</span><br></pre></td></tr></table></figure></p>
<p>此处建立模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//05_require/a</span><br><span class="line"></span><br><span class="line">module.exports.test = &apos;这是A&apos;;</span><br><span class="line"></span><br><span class="line">const B = require(&apos;./b&apos;);</span><br><span class="line"></span><br><span class="line">console.log(&apos;这是在A里面的引入的B&apos;+B.test);</span><br><span class="line"></span><br><span class="line">module.exports.test = &apos;这是AA&apos;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//05_require/b</span><br><span class="line"></span><br><span class="line">module.exports.test = &apos;这是B&apos;;</span><br><span class="line"></span><br><span class="line">const A = require(&apos;./a&apos;);</span><br><span class="line"></span><br><span class="line">console.log(&apos;这是在B里面的引入的A&apos;+A.test);</span><br><span class="line"></span><br><span class="line">module.exports.test = &apos;这是BB&apos;;</span><br></pre></td></tr></table></figure>
<p>执行node 06_run之后，我们会发现输出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">这是在B里面的引入的A这是A</span><br><span class="line">这是在A里面的引入的B这是BB</span><br></pre></td></tr></table></figure>
<p>这就是require的会遇到的问题，有时候我们深入刨析一个问题，了解他的利弊，好的方面应用，不好的方面避免它，不然，当代码上千行的时候，我们在更改，可能就为时已晚，悔不当初。所以，了解一门语言的深层次的东西，是我们必须要掌握的内容。    </p>
<h3 id="4、系统内置模块"><a href="#4、系统内置模块" class="headerlink" title="4、系统内置模块"></a>4、系统内置模块</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// 07_run.js</span><br><span class="line">const fs = require(&apos;fs&apos;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//读文件为异步操作，需要回掉来获取值</span><br><span class="line">const nnn = fs.readFile(&apos;./07_fs.js&apos;, (error, data) =&gt; &#123;</span><br><span class="line">   </span><br><span class="line">    if(error)&#123;</span><br><span class="line">        console.log(error)</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        console.log(data)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">console.log(nnn)</span><br><span class="line"></span><br><span class="line">//&lt;Buffer 0a 63 6f 6e 73 74 20 66 73 20 3d 20 72 65 71 75 69 72 65 28 27 66 73 27 29 3b 0a 0a 2f 2f e8 af bb e6 96 87 e4 bb b6 e4 b8 ba e5 bc 82 e6 ad a5 e6 93 ... &gt;</span><br><span class="line">这是一个16进制的数字</span><br><span class="line"></span><br><span class="line">fs操作二进制流</span><br></pre></td></tr></table></figure>
<p>当更改为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">const fs = require(&apos;fs&apos;);</span><br><span class="line"></span><br><span class="line">//读文件为异步操作，需要回掉来获取值</span><br><span class="line">const nnn = fs.readFile(&apos;./07_fs.js&apos;, (error, data) =&gt; &#123;</span><br><span class="line">   </span><br><span class="line">    if(error)&#123;</span><br><span class="line">        console.log(error)</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        console.log(data.toString())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">console.log(nnn) //输出的就是当前的内容</span><br></pre></td></tr></table></figure>
<h3 id="5、系统外置模块"><a href="#5、系统外置模块" class="headerlink" title="5、系统外置模块"></a>5、系统外置模块</h3><p>例如引入chalk，颜色模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm init </span><br><span class="line"></span><br><span class="line">npm install chalk --save-dev</span><br></pre></td></tr></table></figure>
<p>在这里有个注意的点</p>
<p>dependencies： 打包的依赖</p>
<p>devDependencies： 开发的依赖</p>
<ul>
<li>npm做了一个优化所有的内容，都会放置第一层，而不是全放在文件夹内部，所以我们明明下载了一个chalk,但是却有好几个包，以前会全部放置到chalk内部的node_modules，但是现在不会了。这样就在一级node_modules，否侧依赖太多，会导致node_modules,会非常大</li>
</ul>
<p>我们可以通过一个命令查看全局安装的地点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm root -g</span><br></pre></td></tr></table></figure>
<p>会得到</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/lib/node_modules</span><br></pre></td></tr></table></figure>
<p>这里就是我们全局安装的一些内容</p>
<h3 id="6、exports-和-module-exports的区别"><a href="#6、exports-和-module-exports的区别" class="headerlink" title="6、exports 和 module.exports的区别"></a>6、exports 和 module.exports的区别</h3><p>node中每个模块抛出的其实是module来定义的，exports其实是module.exports 的简写，但是这里我们需要注意的是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// 08_require.js</span><br><span class="line"></span><br><span class="line">const v = require(&apos;./08_run&apos;);</span><br><span class="line"></span><br><span class="line">console.log(v.test);</span><br><span class="line"></span><br><span class="line">//08_run.js</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line"></span><br><span class="line">    a:1,</span><br><span class="line"></span><br><span class="line">    test: 10,</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果直接写exports = {} ,这是错误的，为什么呢，因为你改变了他的指向</p>
<p>module.exports 这个的指向是module，而exports = {} ,这个指向不是module了，所以读取不到</p>
<h3 id="7、global"><a href="#7、global" class="headerlink" title="7、global"></a>7、global</h3><p>浏览器的全局window，node则是global</p>
<p>这里我们重点介绍一下setImmediate</p>
<p>我们先在这里扩展一下知识点：</p>
<ul>
<li><p>同步任务指的是，在主线程上排队执行的任务，只有前一个任务执行完毕，才能执行后一个任务；</p>
</li>
<li><p>异步任务指的是，不进入主线程、而进入”任务队列”（task queue）的任务，只有”任务队列”通知主线程，某个异步任务可以执行了，该任务才会进入主线程执行。</p>
</li>
</ul>
<p>“任务队列”是一个事件的队列（也可以理解成消息的队列），IO设备完成一项任务，就在”任务队列”中添加一个事件，表示相关的异步任务可以进入”执行栈”了。主线程读取”任务队列”，就是读取里面有哪些事件。</p>
<p>“任务队列”中的事件，除了IO设备的事件以外，还包括一些用户产生的事件（比如鼠标点击、页面滚动等等）。只要指定过回调函数，这些事件发生时就会进入”任务队列”，等待主线程读取。</p>
<p>所谓”回调函数”（callback），就是那些会被主线程挂起来的代码。异步任务必须指定回调函数，当主线程开始执行异步任务，就是执行对应的回调函数。</p>
<p>“任务队列”是一个先进先出的数据结构，排在前面的事件，优先被主线程读取。主线程的读取过程基本上是自动的，只要执行栈一清空，”任务队列”上第一位的事件就自动进入主线程。但是，由于存在后文提到的”定时器”功能，主线程首先要检查一下执行时间，某些事件只有到了规定的时间，才能返回主线程。</p>
<p>这里可以详细查看这个 <a href="https://www.cnblogs.com/c3gen/p/6170504.html" target="_blank" rel="noopener">https://www.cnblogs.com/c3gen/p/6170504.html</a></p>
<p>这里setImmediate 和 setTimeout类似，是一个异步的函数，它是进入任务队列，当完成的时候，就会执行它;</p>
<h3 id="8、process进程"><a href="#8、process进程" class="headerlink" title="8、process进程"></a>8、process进程</h3><p>类似于我们常用的</p>
<h3 id="9、debug"><a href="#9、debug" class="headerlink" title="9、debug"></a>9、debug</h3>
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/06/04/精通webpack之路（1）/" rel="next" title="精通webpack之路（1）">
                <i class="fa fa-chevron-left"></i> 精通webpack之路（1）
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/06/24/node进阶-二/" rel="prev" title="node进阶(二)">
                node进阶(二) <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">七 夜</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">53</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、环境"><span class="nav-number">1.</span> <span class="nav-text">1、环境</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#CommonJs"><span class="nav-number">1.1.</span> <span class="nav-text">CommonJs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#global"><span class="nav-number">1.2.</span> <span class="nav-text">global</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#process"><span class="nav-number">1.3.</span> <span class="nav-text">process</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、调试工具"><span class="nav-number">2.</span> <span class="nav-text">2、调试工具</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、require的特性"><span class="nav-number">3.</span> <span class="nav-text">3、require的特性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#module-被加载的时候执行，加载后缓存"><span class="nav-number">3.1.</span> <span class="nav-text">module 被加载的时候执行，加载后缓存</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#一旦出现某个模块被循环加载，就输出以执行的部分-还未执行的部分不会输出"><span class="nav-number">3.2.</span> <span class="nav-text">一旦出现某个模块被循环加载，就输出以执行的部分,还未执行的部分不会输出</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4、系统内置模块"><span class="nav-number">4.</span> <span class="nav-text">4、系统内置模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5、系统外置模块"><span class="nav-number">5.</span> <span class="nav-text">5、系统外置模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6、exports-和-module-exports的区别"><span class="nav-number">6.</span> <span class="nav-text">6、exports 和 module.exports的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7、global"><span class="nav-number">7.</span> <span class="nav-text">7、global</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8、process进程"><span class="nav-number">8.</span> <span class="nav-text">8、process进程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9、debug"><span class="nav-number">9.</span> <span class="nav-text">9、debug</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">七 夜</span>

  

  
</div>




  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Muse</a> v6.4.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.4.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.4.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.4.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.4.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.0"></script>



  



  










  





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
